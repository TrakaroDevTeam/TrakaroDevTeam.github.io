<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Trakaro - Edit Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="trakaro.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
    <script language="javascript" src="JIC.min.js"></script>

    <style>
    .checked {
    color: #70AD46;
    }
    p {
        font-family: Arial;
        font-size: 1.2vw;
    }
    .textAreaStyle {
      position: absolute;
      left: -2w;
      width:68.5vw;
      height:30vw;
      margin: 0vw;
      padding:1vw;
      font-size:1.2vw;
      border: 0.3vw solid #7f7f7f;
      color: black;
    }
</style>
</head>
<body style="overflow-x: hidden; background-color: #f2f2f2;" onload="video_onload()">
  <img id="sourceImg" style="height:40vw; width:75vw; position: fixed; left: 1000vw; top: -1000vw;"/>
  <img id="profileImg" style="height: 11vw; width: 11vw; position: fixed; left: 1000vw; top: -1000vw;"/>
  <img id="otherImg" style="height: 14vw; width: 21vw; position: fixed; left: 1000vw; top: -1000vw;"/>
<div id="loader" style="position:fixed; padding:0vw; margin:0vw; z-index: 1000; top:0; left:0; width: 100%; height: 100%; background:rgba(0, 0, 0, 0.637)">
        <div class="loader"></div>
    </div>
    <div>
        <nav class="navbar bg-primary" style="z-index: 20; position:fixed; width:100vw; box-shadow: 0px 0px 0px 1px gray;">
            <div class="col-sm-1"></div>
                <div class="container-fluid">
                    <div class="navbar-header" style="margin: 0.5vw; margin-left:-0.1vw">
                        <img class="img-circle" src="img/TrakaroIcon.png" alt="trakaroicon" style="width: 4.7vw;">
                        <img src="img/trakaro.png" alt="trakaro" style="position: relative; width: 11.7vw; top: 0.3vw">
                    </div>
                </div>
        </nav>
    </div>
    <div class="container-fluid">

            <div class="row">
              <div style="background-color:#f2f2f2; height: 100vw; position:absolute; top: 0; width: 25vw;">
                    <div style="height:10vw; margin-top: 9vw;">
                            <img id="prof_pic" style = "margin-left: auto; margin-right: auto; display: block; border-radius: 50%;  box-shadow: 1px 3px 10px grey; background-color:white; height: 11vw; width: 11vw;" src="piclogo1.png">
                            <label class="custom-file-upload">
                            <input type="file" id="pic"/>
                            <img style = "position: absolute; top: 9vw; left: 7vw; border-radius: 100%; opacity: 0.5; background-color:black; height: 11vw; width: 11vw; cursor: pointer" src="changeprofile.png">
                            <p style = "position: absolute; top: 13.5vw; left: 7.8vw; font-size: 1.3vw; cursor: pointer"> 256 x 256 (png) </p>
                            </label>
                            <img onclick="removeProfPic()" style = "position: absolute; top: 8.5vw; left: 14.5vw; border-radius: 50%; background-color: none; height: 3.5vw; width: 3.5vw; cursor: pointer;" src="close.png">
                        </div>
                    <div style="position:relative; margin-top: 2vw; margin-bottom: 2vw; padding-left: 1vw; padding-right: 1vw;">
                            <h3 id="name" class="card-title" align="center"><b>HOTEL NAME</b></h3>
                            <hr>
                            <p align="center" style="margin-top: -1vw;">No Customer and Fylla Rating Yet</p>
                            <br>
                            <div style="position:absolute; margin-left: 1vw;" hidden>
                             <!--   <span style="font-size: 1.5vw;" class="fa fa-star checked"></span> -->
                                <span id="star1" style="font-size: 1.5vw;" class="fa fa-star"></span>
                                <span id="star2" style="font-size: 1.5vw;" class="fa fa-star"></span>
                                <span id="star3" style="font-size: 1.5vw;" class="fa fa-star"></span>
                                <span id="star4" style="font-size: 1.5vw;" class="fa fa-star"></span>
                                <span id="star5" style="font-size: 1.5vw;" class="fa fa-star"></span>
                                <p id="reviews" class="card-text">0 review</p>
                            </div>
                            <div style="margin-left: 12vw; margin-top: -0.5vw;" hidden>
                                    <p id="fylla_rating" align="center" style="font-size:2vw;"><b>No</b></p>
                                    <p align="center" style="margin-top: -1vw;">Rating Yet</p>
                                    <img style=" width: 2.5vw; transform: rotate(15deg); margin-left: 8.5vw; margin-top: -6vw;" src="FYLLA-Icon.png" alt="logo">
                            </div>
<!--
                            <img style="position: relative; top: -1vw; left: 15vw; height: 2.5vw; width: 5vw; cursor: pointer" src="LiveOff.png">
-->
                            <div style="margin-left: 1vw; margin-top: -1vw;">
                            <br>
                            <img style="height: 1.5vw; width: 1.5vw;" src="phone-call.png">
                            <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" class="round0 font1" type="text" id="contact" name="contact" placeholder="Contact Number">
                            <br><br>
                            <img style="height: 1.5vw; width: 1.5vw;" src="international.png">
                            <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" class="round0 font1" type="text" id="website" name="link" placeholder="Website Link">
                            <br><br>
                            <img style="height: 1.5vw; width: 1.5vw;" src="maps-and-flags.png">
                            <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" class="round0 font1" type="text" id="address" name="address" placeholder="Exact Address">
                            <br><br>
                            <img style="height: 1.5vw; width: 1.5vw;" src="clipboard-with-pencil-.png">
                            <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" class="round0 font1" type="text" id="booking_url" name="url" placeholder="Booking Url">
                            <br><br><br><br>
                            <div id="packageGroup" style="display: none;">
                              <p style="width: 100%; text-align: center;"><b>Package Pricing</b></p>
                              <br>
                              <label for="price1"><p>Single<p></label>
                              <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" onkeydown="changePrice1();" class="round0 font1" type="number" id="price1" name="price1" placeholder="Single">
                              <label for="price2"><p>Couple<p></label>
                              <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" onkeydown="changePrice2();" class="round0 font1" type="number" id="price2" name="price2" placeholder="Couple">
                              <label for="price3"><p>Group(per person)<p></label>
                              <input style="margin-left:1vw; width: 19vw; margin-top: -1.5vw; padding: 0.5vw 1vw 0.5vw 1vw" onkeydown="changePrice3();" class="round0 font1" type="number" id="price3" name="price3" placeholder="Group">
                            </div>
                            </div>
                        </div>

              </div>
              <div style=" height: 100vw; position:fixed; background-color: white; left: 25vw; top: 5.5vw; width: 75vw;">
              </div>
              <div style=" height: 100vw; position:absolute; left: 25vw; top: 5.5vw; width: 75vw;">
                    <p style="position:absolute; margin-top: 15vw; margin-left: 17.5vw; z-index: 10; font-size: 5vw; ">1030 x 550 (png)</p>
                    <img id="cover_pic" style="background-image: url('CoverPhoto.png'); background-size: cover; background-repeat: no-repeat; background-position: center; height:42.85vw; width:75vw; margin-left: 0vw; margin-top: 0vw;">
                    <video id="videoSource" style="background-color: black; z-index: 10; width: 75vw; height: 42.85vw; position: absolute; left: 0vw; top: 0vw;" poster="CoverPhoto.png" controls="">
                      Your browser does not support HTML5 video.
                    </video>
                    <label class="custom-file-upload">
                        <input type="file" id="cover"/>

                   <!-- Edited -->

                    <div style="position: absolute; top: 0.5vw; left: 58vw; padding: 0.75vw 2vw 0.75vw 2vw; margin:1vw; z-index: 11 !important; font-size:1.1vw;" class="btn-transblack">CHANGE COVER</div>
                    </label>
                  <div onclick="removeCover()" style="position: absolute; top: 4.5vw; left: 58vw; padding: 0.75vw 2vw 0.75vw 2vw; margin:1vw; z-index: 11 !important; font-size:1.1vw;" class="btn-transblack"><b>REMOVE COVER</b></div>
                  <label id="videoBtn" class="custom-file-upload" style="display: block;">
                        <input type="file" id="video" accept="video/*">
                    <div style="text-align: center; position: absolute; width: 13.3vw; top: 8.5vw; left: 58vw; padding: 0.75vw 2vw 0.75vw 2vw; margin:1vw; z-index: 11 !important; font-size:1.1vw;" class="btn-transblack">ADD VIDEO</div>
                  </label>
                  <div onclick="videoClick(1)" id="videoRemove" style="display: none; text-align: center; position: absolute; width: 13.3vw; top: 8.5vw; left: 58vw; padding: 0.75vw 2vw 0.75vw 2vw; margin:1vw; z-index: 11 !important; font-size:1.1vw;" class="btn-transblack">REMOVE VIDEO</div>

                  <!-- Edited -->

                  <div style="position:relative; margin-top: 3.85vw; margin-bottom: 2vw; margin-left: 2vw; margin-right: 2vw;">
                        <p style="font-size:1.5vw;"><b id="title1">HOTEL INFORMATION:</b></p>
                        <hr>
                        <div class="container" style="margin: 0vw; margin-bottom: 30vw;">
                                <div class="row">
                            <textarea id="textbox" placeholder="Hotel Information"></textarea>
                                </div>
                            </div>
                        <br>
                        <div id="thingsToRemember" style="display: none;">
                          <p style="font-size:1.5vw;"><b>THINGS TO REMEMBER:</b></p>
                          <hr>
                          <div class="container" style="margin: 0vw; margin-bottom: 30vw;">
                                  <div class="row">
                              <textarea id="rememberList" class="textAreaStyle" placeholder="Write a list to remember here..."></textarea>
                                  </div>
                              </div>
                          <br>
                        </div>
                        <hr>
                        <p style="font-size:1.5vw;"><b>PHOTOS</b></p>

                            <label class="custom-file-upload">
                              <input type="file" id="files" name="files[]" multiple />
                              <img style="opacity: 0.5; position: relative; height: 14vw; width: 21vw; margin: 0.5vw; cursor: pointer; z-index: 2;" src="addpic.png">
                            </label>
                              <output id="list"></output>
                              <p style="font-size:1.5vw;">Old Photos</p>
                            <div id="noPhoto"></div>
                            <div id="oldPics">
                            </div>

                              <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-app.js"></script>

                            <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-auth.js"></script>
                            <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-firestore.js"></script>
                            <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-storage.js"></script>

                            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWfH9kn2b6wpYMeBMA-bdszxJq32tXnpk&libraries=places"
                            async defer></script>

                            <script src="main5.js"></script>

                        <!--<img style="height: 2.5vw; width: 2.5vw; position: absolute; top: 41vw; left:41vw; cursor: pointer" src="close-black.png">

                        <a target="_blank" href="1.jpg">
                                <img style="height: 14vw; width: 21vw; margin: 0.5vw" src="1.jpg">
                        </a>

                        <img style="height: 2.5vw; width: 2.5vw; position: absolute; top: 41vw; left:63.2vw; cursor: pointer" src="close-black.png">

                        <a target="_blank" href="2.jpg">
                        <img style="height: 14vw; width: 21vw; margin:0.5vw" src="2.jpg">
                        </a>

                        <img style="height: 2.5vw; width: 2.5vw; position: absolute; top: 56vw; left:18.8vw; cursor: pointer" src="close-black.png">

                        <a target="_blank" href="3.jpg">
                                <img style="height: 14vw; width: 21vw; margin:0.5vw" src="3.jpg">
                        </a>

                        <img style="height: 2.5vw; width: 2.5vw; position: absolute; top: 56vw; left:41vw; cursor: pointer" src="close-black.png">

                        <a target="_blank" href="1.jpg">
                                <img style="height: 14vw; width: 21vw; margin:0.5vw" src="1.jpg">
                        </a>

                        <img style="height: 2.5vw; width: 2.5vw; position: absolute; top: 56vw; left:63.2vw; cursor: pointer" src="close-black.png">

                        <a target="_blank" href="2.jpg">
                                <img style="height: 14vw; width: 21vw; margin:0.5vw" src="2.jpg">
                         </a>-->

                      <script>

                          $(document).ready(function(){
                              setTimeout(function(){
                                  initialize();
                              }, 500);
                          });

                          function changePrice1(){
                            var str = document.getElementById('price1').value;
                            if(document.getElementById('price1').value == "") {
                              price1 = 0;
                            } else {
                              if(str.split(".").length > 2){
                                price1 = 0;
                              } else {
                                price1 = parseFloat(str);
                              }
                            }
                          }

                          function changePrice2(){
                            var str = document.getElementById('price2').value;
                            if(document.getElementById('price2').value == "") {
                              price2 = 0;
                            } else {
                              if(str.split(".").length > 2){
                                price2 = 0;
                              } else {
                                price2 = parseFloat(str);
                              }
                            }
                          }

                          function changePrice3(){
                            var str = document.getElementById('price3').value;
                            if(document.getElementById('price3').value == "") {
                              price3 = 0;
                            } else {
                              if(str.split(".").length > 2){
                                price3 = 0;
                              } else {
                                price3 = parseFloat(str);
                              }
                            }
                          }

                          function initialize(){
                                insertSearch("address");
                          }

                          function updateAddress(){
                              if(hotel_data.address == null){
                                  hotel_data.address = "";
                              }
                              if(hotel_data.lat == null){
                                  hotel_data.lat = 0;
                              }
                              if(hotel_data.lng == null){
                                  hotel_data.lng = 0;
                              }
                              if(hotel_data.province == null){
                                  hotel_data.province = "";
                              }
                              defaultFirestore.collection('hotelAccount').doc(email).update({
                                 address: hotel_data.address,
                                 lat: hotel_data.lat,
                                 lng: hotel_data.lng,
                                 province: hotel_data.province
                              });
                          }

                          function showLoader(){
                            document.getElementById("loader").style.display = "block";
                          }

                          var video_url = "";
                          var video_data = [""];
                          var video_done = ![];
                          var price1 = 0;
                          var price2 = 0;
                          var price3 = 0;
                          var user_type = "";
                          var listRemember = "";

                          function video_onload(){
                            if(document.getElementById("videoSource").src != "" && document.getElementById("videoSource").src != null){
                              document.getElementById("videoSource").style.display = "block";
                              document.getElementById("videoBtn").style.display = "none";
                              document.getElementById("videoRemove").style.display = "block";
                              video_url = document.getElementById("videoSource").src;
                            } else {
                              document.getElementById("videoBtn").style.display = "block";
                              document.getElementById("videoRemove").style.display = "none";
                              document.getElementById("videoSource").style.display = "none";
                            }
                          }

                          function videoClick(stat){
                            if(stat == 1){
                              video_url = "";
                              video_data[0] = "";
                              $("#videoSource").attr('src', '');
                            }

                            if(!(video_url == "" && video_data[0] == "")){
                                document.getElementById("videoBtn").style.display = "none";
                                document.getElementById("videoRemove").style.display = "block";
                            } else {
                                document.getElementById("videoBtn").style.display = "block";
                                document.getElementById("videoRemove").style.display = "none";
                                document.getElementById("videoSource").style.display = "none";
                                video_url = "";
                                video_data[0] = "";
                            }
                          }

                          function insertSearch(id){

                            var input = document.getElementById(id);

                            var autocomplete = new google.maps.places.Autocomplete(input);

                            autocomplete.addListener('place_changed', function() {
                                var place = autocomplete.getPlace();
                                if (!place.geometry) {
                                    // User entered the name of a Place that was not suggested and
                                    // pressed the Enter key, or the Place Details request failed.
                                    window.alert("No details available for input: '" + place.name + "'");
                                    return;
                                }

                                var address = '';
                                if (place.address_components) {

                                    var pl = place.address_components;
                                    var shown = false;

                                    pl.forEach(function (arrayItem) {

                                        for(var i=0; i<arrayItem.types.length; i++){
                                          if(arrayItem.types[i] == "administrative_area_level_2"){
                                            hotel_data.province = arrayItem.long_name + ", Philippines";
                                            shown = true;
                                          }
                                        }
                                    });

                                    if(!shown){
                                        alert("Please enter address atleast city level");
                                    } else {
                                        hotel_data.lat = place.geometry.location.lat();
                                        hotel_data.lng = place.geometry.location.lng();
                                    }

                                    address = [
                                    (place.address_components[0] && place.address_components[0].short_name || ''),
                                    (place.address_components[1] && place.address_components[1].short_name || ''),
                                    (place.address_components[2] && place.address_components[2].short_name || '')
                                    ].join(' ');
                                    
                                    hotel_data.address = address;
                                } else {
                                    console.log("None");
                                }
                            });
                        }

                      </script>

                         <div style="clear:both; margin-left: 38.7vw; margin-top: 10vw">
                                <button type="button" class="btn btn-success bg-tertiarygreen text-green font2" style="float:left; border-radius: 2vw; padding: 0.4vw 4vw 0.4vw 4vw; margin-right: 1.4vw;" onclick="discard()">Discard</button>
                                <button type="button" class="btn btn-warning bg-secondary2 text-white font2" style="border-radius: 2vw; padding: 0.4vw 5vw 0.4vw 5vw" onclick="save()">Save</button>
                        </div>

                    </div>
            </div>
        </div>
    </div>
</body>
<script>
        if(sessionStorage.getItem('email') == null || sessionStorage.getItem('email') == undefined){
            alert('Please login to continue');
            location.href="hotel-index.html";
        }
</script>
</html>
